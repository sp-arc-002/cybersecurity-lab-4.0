---
# ═══════════════════════════════════════════════════════════════════════
# Ansible Inventory - Home Lab Infrastructure
# Base Network: 172.16.2.0/24 (Management VLAN 1)
# Hardware: Lenovo P520 (6C/12T, 64GB RAM, 4TB ZFS)
# ═══════════════════════════════════════════════════════════════════════

all:
  children:
    # ─────────────────────────────────────────────────────────────────────
    # HYPERVISOR / INFRASTRUCTURE
    # ─────────────────────────────────────────────────────────────────────
    proxmox:
      hosts:
        proxmox-p520:
          ansible_host: 172.16.2.10
          ansible_user: root
          ansible_port: 22
          ansible_python_interpreter: /usr/bin/python3
          
          # Hardware specs
          cpu_cores: 6
          cpu_threads: 12
          ram_gb: 64
          storage_tb: 4
          
          # Network
          gateway: 172.16.2.1
          dns_servers:
            - 172.16.2.1
            - 1.1.1.1
          
          # ZFS Pools
          zfs_pools:
            - name: bulk-pool-1
              size: 500GB
              purpose: logs_pcaps_archives
            - name: bulk-pool-2
              size: 200GB
              purpose: malware_samples_isos
            - name: critical
              size: 1TB
              purpose: encrypted_evidence_backups
            - name: performance
              size: 400GB
              purpose: dev_tools_fast_io

    # ─────────────────────────────────────────────────────────────────────
    # FIREWALLS / ROUTERS
    # ─────────────────────────────────────────────────────────────────────
    firewalls:
      hosts:
        opnsense:
          ansible_host: 172.16.2.1
          ansible_user: root
          ansible_port: 22
          ansible_connection: ssh
          
          # Network interfaces
          wan_interface: em0
          wan_ip: 192.168.1.50  # DHCP from parents' router
          lan_interface: em1
          lan_ip: 172.16.2.1
          lan_subnet: 172.16.2.0/24
          
          # Services
          dhcp_enabled: true
          ids_ips_enabled: true
          suricata_enabled: true
          tailscale_enabled: true
          
          # VM info (if virtualized instead of bare metal)
          vm_id: 100
          vm_cores: 2
          vm_ram: 4096
          vm_disk: 32

        cisco-switch:
          ansible_host: 172.16.2.254
          ansible_user: admin
          ansible_network_os: ios
          ansible_connection: network_cli
          
          # Switch details
          model: catalyst_2960
          uplink_ports:
            - GigabitEthernet0/1  # To OPNsense
            - GigabitEthernet0/2  # To Proxmox
          span_port: GigabitEthernet0/12  # Mirror to Security Onion

    # ─────────────────────────────────────────────────────────────────────
    # BLUE TEAM / DEFENSIVE (VLAN 10)
    # ─────────────────────────────────────────────────────────────────────
    blue_team:
      hosts:
        security-onion:
          ansible_host: 172.16.10.10
          ansible_user: onion
          ansible_become: true
          
          vm_id: 110
          vlan: 10
          vlan_name: BLUE-TEAM-SIEM
          
          vm_cores: 6
          vm_ram: 12288  # 12GB (reduced from 16GB for RAM constraints)
          vm_disk: 500
          vm_pool: bulk-pool-1
          
          # Network
          gateway: 172.16.10.1
          ip_address: 172.16.10.10/24
          
          # Services
          services:
            - suricata
            - zeek
            - elasticsearch
            - kibana
            - stenographer
            - wazuh
          
          # Monitoring
          span_interface: eth1  # Receives mirrored traffic
          management_interface: eth0
          
          tailscale_enabled: true

    # ─────────────────────────────────────────────────────────────────────
    # RED TEAM / OFFENSIVE (VLAN 20)
    # ─────────────────────────────────────────────────────────────────────
    red_team:
      hosts:
        blackarch:
          ansible_host: 172.16.20.10
          ansible_user: redteam
          ansible_become: true
          
          vm_id: 120
          vlan: 20
          vlan_name: RED-TEAM-OFFENSIVE
          
          vm_cores: 8
          vm_ram: 16384  # 16GB for CLion + tools
          vm_disk: 400
          vm_pool: performance
          
          # Network
          gateway: 172.16.20.1
          ip_address: 172.16.20.10/24
          
          # Capabilities
          capabilities:
            - penetration_testing
            - exploit_development
            - reverse_engineering
            - fuzzing
            - c2_infrastructure
          
          # Development tools
          tools:
            - clion
            - vscode
            - metasploit
            - burpsuite
            - ghidra
            - gdb_pwndbg
          
          tailscale_enabled: true

        wifi-pineapple:
          ansible_host: 172.16.20.20
          ansible_user: root
          
          # Physical device (not VM)
          device_type: physical
          vlan: 20
          switch_port: GigabitEthernet0/10
          
          # Purpose
          purpose: wireless_testing
          capabilities:
            - wifi_auditing
            - evil_twin_attacks
            - packet_injection

    # ─────────────────────────────────────────────────────────────────────
    # CORPORATE SIMULATION / ATTACK TARGET (VLAN 30)
    # ─────────────────────────────────────────────────────────────────────
    corp_sim:
      hosts:
        rocky-linux:
          ansible_host: 172.16.30.10
          ansible_user: administrator
          ansible_become: true
          
          vm_id: 130
          vlan: 30
          vlan_name: CORP-SIMULATION
          
          vm_cores: 2
          vm_ram: 6144  # 6GB (reduced from 8GB)
          vm_disk: 100
          vm_pool: bulk-pool-1
          
          # Network
          gateway: 172.16.30.1
          ip_address: 172.16.30.10/24
          
          # Enterprise services to deploy
          services:
            - active_directory  # Samba 4
            - ldap
            - dns_bind
            - dhcp
            - apache
            - mariadb
            - smb_shares
            - postfix
            - ssh_bastion
          
          # Security instrumentation
          monitoring:
            - wazuh_agent
            - velociraptor_agent
            - sysmon_linux
            - auditd
            - aide
          
          # Intentional vulnerabilities for testing
          vulnerable: true
          attack_surface: high
          
          tailscale_enabled: false  # Simulates isolated corp network

    # ─────────────────────────────────────────────────────────────────────
    # MALWARE ANALYSIS LAB (VLAN 40) - ISOLATED
    # ─────────────────────────────────────────────────────────────────────
    malware_lab:
      hosts:
        remnux:
          ansible_host: 172.16.40.10
          ansible_user: remnux
          ansible_become: true
          
          vm_id: 140
          vlan: 40
          vlan_name: MALWARE-LAB-ISOLATED
          
          vm_cores: 4
          vm_ram: 8192  # 8GB
          vm_disk: 200
          vm_pool: bulk-pool-2
          
          # Network
          gateway: 172.16.40.1
          ip_address: 172.16.40.10/24
          
          # CRITICAL: Isolated from internet
          internet_access: false
          isolated: true
          
          # Tools
          tools:
            - inetsim
            - fakenet_ng
            - ghidra
            - radare2
            - ida_free
            - flare_tools
            - volatility
          
          # Safety
          snapshot_required: true
          clipboard_isolation: true
          shared_folders: false
          
          tailscale_enabled: false  # NEVER enable

    # ─────────────────────────────────────────────────────────────────────
    # FORENSICS / INCIDENT RESPONSE (VLAN 41)
    # ─────────────────────────────────────────────────────────────────────
    forensics:
      hosts:
        openbsd-ir:
          ansible_host: 172.16.41.10
          ansible_user: forensics
          ansible_become: true
          
          vm_id: 141
          vlan: 41
          vlan_name: FORENSICS-IR
          
          vm_cores: 4
          vm_ram: 10240  # 10GB (reduced from 16GB)
          vm_disk: 1024  # 1TB for evidence storage
          vm_pool: critical
          
          # Network
          gateway: 172.16.41.1
          ip_address: 172.16.41.10/24
          
          # OS
          os: openbsd
          os_version: "7.6"
          
          # Tools
          tools:
            - sleuthkit
            - autopsy
            - volatility
            - foremost
            - bulk_extractor
            - osquery
            - velociraptor
          
          # Evidence handling
          evidence_storage: /mnt/evidence
          chain_of_custody: true
          write_blocker: true
          
          tailscale_enabled: true

    # ─────────────────────────────────────────────────────────────────────
    # CRYPTO VAULT (VLAN 60) - AIR-GAPPED
    # ─────────────────────────────────────────────────────────────────────
    vault:
      hosts:
        openbsd-vault:
          # NO ansible_host - air-gapped, manual access only
          ansible_connection: local  # Only when physically connected
          
          vm_id: 160
          vlan: 60
          vlan_name: CRYPTO-VAULT-AIRGAP
          
          vm_cores: 2
          vm_ram: 4096  # 4GB
          
          # External storage
          storage_type: external_ssd
          storage_device: samsung_t9
          storage_size: 1TB
          encrypted: true
          encryption: bioctl_softraid
          
          # OS
          os: openbsd
          os_version: "7.6"
          
          # Network
          network_enabled: false  # AIR-GAPPED
          usb_passthrough: true
          
          # Purpose
          purpose:
            - key_generation
            - code_signing
            - cryptocurrency_cold_storage
            - sensitive_data_encryption
          
          tailscale_enabled: false  # NEVER enable

    # ─────────────────────────────────────────────────────────────────────
    # DEVELOPMENT / NETWORK LAB (VLAN 63)
    # ─────────────────────────────────────────────────────────────────────
    dev_network:
      hosts:
        openbsd-network:
          ansible_host: 172.16.63.20
          ansible_user: netlab
          ansible_become: true
          
          vm_id: 163
          vlan: 63
          vlan_name: DEV-NETWORK-LAB
          
          vm_cores: 2
          vm_ram: 4096  # 4GB
          vm_disk: 100
          vm_pool: bulk-pool-2
          
          # Network
          gateway: 172.16.63.1
          ip_address: 172.16.63.20/24
          
          # OS
          os: openbsd
          os_version: "7.6"
          
          # Capabilities
          capabilities:
            - pf_firewall_testing
            - bgp_ospf_routing
            - vpn_research
            - traffic_shaping
            - protocol_development
          
          tailscale_enabled: true

    # ─────────────────────────────────────────────────────────────────────
    # MANAGEMENT / JUMP BOX (VLAN 1)
    # ─────────────────────────────────────────────────────────────────────
    management:
      hosts:
        jump-box:
          ansible_host: 172.16.2.20
          ansible_user: admin
          ansible_become: true
          
          vm_id: 101
          vlan: 1
          vlan_name: MGMT-OOB
          
          vm_cores: 2
          vm_ram: 2048  # 2GB
          vm_disk: 50
          vm_pool: performance
          
          # Network
          gateway: 172.16.2.1
          ip_address: 172.16.2.20/24
          
          # Purpose
          purpose: bastion_host
          capabilities:
            - ssh_gateway
            - audit_logging
            - centralized_management
          
          tailscale_enabled: true

    # ─────────────────────────────────────────────────────────────────────
    # PHYSICAL DEVICES (Non-VM)
    # ─────────────────────────────────────────────────────────────────────
    physical:
      hosts:
        t480-qubes:
          ansible_host: 10.0.0.2
          ansible_user: user
          
          device_type: laptop
          os: qubes_os
          ram_gb: 48
          
          # Network
          tailscale_ip: 100.64.1.20
          vpn_gateway: 10.0.0.1
          
          # Purpose
          purpose: mobile_security_workstation
          location: travel

    # ─────────────────────────────────────────────────────────────────────
    # LOGICAL GROUPINGS
    # ─────────────────────────────────────────────────────────────────────
    vms:
      children:
        - blue_team
        - red_team
        - corp_sim
        - malware_lab
        - forensics
        - vault
        - dev_network
        - management

    openbsd_hosts:
      children:
        - forensics
        - vault
        - dev_network

    security_critical:
      children:
        - vault
        - forensics
        - malware_lab

    internet_access:
      children:
        - blue_team
        - red_team
        - corp_sim
        - forensics
        - dev_network

    isolated:
      children:
        - malware_lab
        - vault

    tailscale_nodes:
      children:
        - blue_team
        - red_team
        - forensics
        - dev_network
        - management
        